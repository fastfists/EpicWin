{% extends 'layout_fast.html' %}

{% addtoblock "js" %}
	<link rel="stylesheet" href="/static/css/checkout.css">
{% endaddtoblock %}

{% macro render_list_item(item, count) %}
{% set product = item.product %}
<li class="collection-item avatar horizantal">
  <img src="{{ '/static/images/Product Images/' + product.image_name }}" alt="" class="circle">
  <span class="title">{{ product.name }} </span>
  <p>{{ product.description_short }}</p>
  <p>{{ product.cost }}</p>
  <a href="/remove/{{ product.id }}" class="secondary-content"><i class="material-icons">remove_circle</i></a>
</li>
{% endmacro %}

{% block body %}

<div class="shipping card center dark-purple">
	<h2>Free shipping</h2>
	<p>On all orders until 2021</p>
</div>

<div class="row">
    <div class="collection item-section col s6 offset-s1">
        <li class="collection-header"><h4>Items</h4></li>
        <div class="divider"></div>
        {% for item in cart.items %}
            {{ render_list_item(item, item.count) }}
        {% endfor %}
    </div>
    <div class="col s3 offset-s1">
        <div class="card-panel">
            <h3>Order Summary</h3>
            <hr>
            {% set total = cart.calc_total() %}
            <p class="subheading-2">Subtotal: $ {{ total }} </p>
            <p class="subheading-2">Discounts: $ 00.00 </p>
            <p class="subheading-2">Taxes: $ {{ total|float * 0.0825 }} </p>
            <p class="subheading-2">Total: $ {{ total|float * 1.0825 }} </p>
        </div>
        <a href="/purchase" class="btn">
            Checkout <i class="material-icons">arrow_forward</i>
        </a>
    </div>
</div>
{% endblock body %}
